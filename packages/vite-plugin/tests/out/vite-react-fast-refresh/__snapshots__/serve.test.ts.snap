// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`serve fs output > _00 manifest.json 1`] = `
Object {
  "action": Object {
    "default_popup": "src/popup.html",
  },
  "background": Object {
    "service_worker": "service-worker-loader.js",
    "type": "module",
  },
  "content_scripts": Array [
    Object {
      "js": Array [
        "src/content.tsx-loader.js",
      ],
      "matches": Array [
        "http://*/*",
      ],
    },
  ],
  "manifest_version": 3,
  "name": "test extension",
  "version": "1.0.0",
  "web_accessible_resources": Array [
    Object {
      "matches": Array [
        "<all_urls>",
      ],
      "resources": Array [
        "*",
        "**/*",
      ],
      "use_dynamic_url": false,
    },
  ],
}
`;

exports[`serve fs output > _01 output files 1`] = `
Array [
  "assets/loading-page.hash0.js",
  "manifest.json",
  "service-worker-loader.js",
  "src/App.tsx.js",
  "src/content.tsx-loader.js",
  "src/content.tsx.js",
  "src/popup.html",
  "vendor/chunk-1.js__v--hash.js",
  "vendor/crx-client-port.js",
  "vendor/crx-client-preamble.js",
  "vendor/react-dom.js__v--hash.js",
  "vendor/react-refresh.js",
  "vendor/react_jsx-dev-runtime.js__v--hash.js",
  "vendor/vite-client.js",
  "vendor/vite-dist-client-env.mjs.js",
  "vendor/webcomponents-custom-elements.js",
]
`;

exports[`serve fs output > _02 optimized deps 1`] = `
Set {
  "src/content.tsx",
  "src/popup.html",
}
`;

exports[`serve fs output > assets/loading-page.hash0.js 1`] = `
"const VITE_URL = "http://localhost:3000";
document.body.innerHTML = \`
<div
      id="app"
      style="
        border: 1px solid #ddd;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      "
    >
      <h1 style="color: #333">Vite Dev Mode</h1>
      <p style="color: #666">
        Cannot connect to the Vite Dev Server on <a href="\${VITE_URL}">\${VITE_URL}</a>
      </p>
      <p style="color: #666">
        Double-check that Vite is working and reload the extension.
      </p>
      <p style="color: #666">
        This page will close when the extension reloads.
      </p>
      <button
        style="
          padding: 10px 20px;
          border: none;
          background-color: #007bff;
          color: #fff;
          border-radius: 5px;
          cursor: pointer;
        "
      >
        Reload Extension
      </button>
    </div>\`;
document.body.querySelector("button")?.addEventListener("click", () => {
  chrome.runtime.reload();
});
let tries = 0;
let ready = false;
do {
  try {
    await fetch(VITE_URL);
    ready = true;
  } catch {
    const timeout = Math.min(100 * Math.pow(2, ++tries), 5e3);
    console.log(\`[CRXJS] Vite Dev Server is not available on \${VITE_URL}\`);
    console.log(\`[CRXJS] Retrying in \${timeout}ms...\`);
    await new Promise((resolve) => setTimeout(resolve, timeout));
  }
} while (!ready);
location.reload();
"
`;

exports[`serve fs output > service-worker-loader.js 1`] = `
"import 'http://localhost:3000/@vite/env';
import 'http://localhost:3000/@crx/client-worker';
"
`;

exports[`serve fs output > src/App.tsx.js 1`] = `
"import { createHotContext as __vite__createHotContext } from "/vendor/vite-client.js";import.meta.hot = __vite__createHotContext("/src/App.tsx.js");import __vite__cjsImport0_react_jsxDevRuntime from "/vendor/react_jsx-dev-runtime.js__v--hash.js"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
const App = () => {
  return /* @__PURE__ */ jsxDEV("div", { children: [
    /* @__PURE__ */ jsxDEV("h1", { children: "Popup Page" }, void 0, false, {
      fileName: "<root>/src/App.tsx",
      lineNumber: 6,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("p", { children: "If you are seeing this, React is working!" }, void 0, false, {
      fileName: "<root>/src/App.tsx",
      lineNumber: 7,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "<root>/src/App.tsx",
    lineNumber: 5,
    columnNumber: 5
  }, this);
};
_c = App;
export default App;
var _c;
$RefreshReg$(_c, "App");
import * as RefreshRuntime from "/vendor/react-refresh.js";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("<root>/src/App.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("<root>/src/App.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}
function $RefreshReg$(type, id) {
  return RefreshRuntime.register(type, "<root>/src/App.tsx " + id);
}
function $RefreshSig$() {
  return RefreshRuntime.createSignatureFunctionForTransform();
}
"
`;

exports[`serve fs output > src/content.tsx.js 1`] = `
"import __vite__cjsImport0_react_jsxDevRuntime from "/vendor/react_jsx-dev-runtime.js__v--hash.js"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import __vite__cjsImport1_reactDom from "/vendor/react-dom.js__v--hash.js"; const render = __vite__cjsImport1_reactDom["render"];
import App from "/src/App.tsx.js";
console.log("content script");
const root = document.createElement("div");
root.id = "root";
document.body.append(root);
render(/* @__PURE__ */ jsxDEV(App, {}, void 0, false, {
  fileName: "<root>/src/content.tsx",
  lineNumber: 10,
  columnNumber: 8
}, this), root);
"
`;

exports[`serve fs output > src/content.tsx-loader.js 1`] = `
"(function () {
  'use strict';

  const injectTime = performance.now();
  (async () => {
    if ("vendor/crx-client-preamble.js")
      await import(
        /* @vite-ignore */
        chrome.runtime.getURL("vendor/crx-client-preamble.js")
      );
    await import(
      /* @vite-ignore */
      chrome.runtime.getURL("vendor/vite-client.js")
    );
    const { onExecute } = await import(
      /* @vite-ignore */
      chrome.runtime.getURL("src/content.tsx.js")
    );
    onExecute?.({ perf: { injectTime, loadTime: performance.now() - injectTime } });
  })().catch(console.error);

})();
"
`;

exports[`serve fs output > src/popup.html 1`] = `
"<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Vite Dev Mode</title>
    <script src="/assets/loading-page.hash0.js" type="module"></script>
  </head>
  <body
    style="font-family: Arial, sans-serif; padding: 20px; text-align: center"
  >
    <h1>Vite Dev Mode</h1>
  </body>
</html>
"
`;
